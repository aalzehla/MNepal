@model CustApp.Models.CustomerSRInfo

@{
    Layout = "~/Views/Shared/_Dashboard.cshtml";
    ViewBag.Title = "Dashboard";

    var checkBankLink = ViewBag.HasBankKYC;
    var hasKYC = ViewBag.hasKYC;

    if (this.ViewData["user_message"] != null)
    {
        if (this.ViewData["message_class"].ToString() == "success_info")
        {
            <input type="text" name="checkMsg" value="success_info" hidden />
        }
        else
        {
            <input type="text" name="checkMsg" value="failure_info" hidden />

        }
    }
}

<!-- =============================================== -->
<!-- Content Header (Page header) -->
@*<section class="content-header">
        <h1>
            Dashboard
            <small>Version 1.0.0</small>
        </h1>
        <ol class="breadcrumb">
            <li><a href="#"><i class="fa fa-dashboard"></i> Home</a></li>
            <li class="active">Dashboard</li>
        </ol>
    </section>*@

<!-- Main content -->
<link href="~/Content/NewIcon/style.css" rel="stylesheet" />
<style>
    .image_icon {
        width: 50px;
    } 
</style>
<div class="main-content">
    <div class="bg-grey pad-50">
        <div class="container">
            <div class="row">
                <div class="col-md-6 match-height">

                    <section class="instant-transactions">
                        <div class="top-section clearfix">
                            <h2 class="title">Instant Transactions</h2>
                            <a href="#" class="customize">customize</a>
                        </div>

                        <div class="transactions-grid clearfix">

                            @*@{
                                    if (checkBankLink == "T")
                                    {
                                        <div class="item load-wallet">
                                            <div class="item-inner" onclick="checkBankLink()">
                                                <a href="~/FundTransfer/LoadWalletBW">
                                                    <div class="content-inner">
                                                        <i class="thaili-icon-load-wallet"></i>
                                                        <span>Load Wallet</span>
                                                    </div>
                                                </a>
                                            </div>
                                        </div>
                                    }
                                    else
                                    {
                                        <div class="item load-wallet">
                                            <div class="item-inner" onclick="checkBankLink()">
                                                    <div class="content-inner">
                                                        <i class="thaili-icon-load-wallet"></i>
                                                        <span>Load Wallet</span>
                                                    </div>
                                            </div>
                                        </div>
                                    }
                                }*@

                            <div class="item load-wallet">
                                <div class="item-inner">
                                    <a href="~/LoadWallet/EBanking">
                                        <div class="content-inner">

                                            <i class="thaili-icon-load-wallet"></i>
                                            <span>Load Wallet</span>
                                        </div>
                                    </a>
                                </div>
                            </div>

                            <div class="item transfer-fund">
                                <div class="item-inner">
                                    <a href="~/FundTransfer/Index">
                                        <div class="content-inner">
                                            <i class="thaili-icon-transfer-funds"></i>
                                            <span>Transfer funds</span>
                                        </div>
                                    </a>
                                </div>
                            </div>
                            <!-- /item -->

                            <div class="item top-up">
                                <div class="item-inner">
                                    <a href="~/UtilityPay/TopUp">
                                        @*<a href="~/UtilityPay/NTTopUp">*@
                                        <div class="content-inner">
                                            <i class="thaili-icon-top-up"></i>
                                            <span>Top Up</span>
                                        </div>
                                    </a>
                                </div>
                            </div>
                            <!-- /item -->

                            <div class="item recharge">
                                <div class="item-inner">
                                    <a href="~/UtilityPay/NewRecharge">
                                        <div class="content-inner">
                                            <i class="thaili-icon-recharge"></i>
                                            <span>Recharge</span>
                                        </div>
                                    </a>
                                </div>
                            </div>
                            <!-- /item -->

                            @{
                                if (hasKYC == "T")
                                {
                                    <div class="item withdraw">
                                        <div class="item-inner" onclick="checkKYC()">
                                            <a href="~/FundTransfer/Withdraw">
                                                <div class="content-inner">
                                                    <i class="thaili-icon-wallet" id="icon-withdraw"></i>

                                                    <span id="withdraw-text">Bank Transfer </span>
                                                </div>
                                            </a>
                                        </div>
                                    </div>
                                }
                                else
                                {
                                    <div class="item withdraw">
                                        <div class="item-inner" onclick="checkKYC()">
                                            <div class="content-inner">
                                                <i class="thaili-icon-wallet" id="icon-withdraw"></i>
                                                <span id="withdraw-text">Bank Transfer </span>
                                            </div>
                                        </div>
                                    </div>
                                }
                            }

                            <div class="item internet">
                                <div class="item-inner">
                                    <a href="~/MerchantPayment/MerchantRestaurant">
                                        <div class="content-inner">

                                            <span class="icon-icon-merchant"></span>
                                            <span class="merchant-text">Merchants</span>
                                        </div>
                                    </a>
                                </div>
                            </div>
                            <!-- /item -->
                            @{
                                if (hasKYC == "T")
                                {
                                    <div class="item internet">
                                        <div class="item-inner" onclick="checkKYC()">
                                            <a href="~/Cash/Out">
                                                <div class="content-inner">

                                                    <span class="icon-icon-cashout"></span>
                                                    <span class="cashout-text">Cash Out through Agent</span>
                                                </div>
                                            </a>
                                        </div>
                                    </div>
                                }
                                else
                                {
                                    <div class="item internet">
                                        <div class="item-inner" onclick="checkKYC()">
                                            <div class="content-inner">
                                                <span class="icon-icon-cashout"></span>
                                                <span class="cashout-text">Cash Out through Agent</span>
                                            </div>
                                        </div>
                                    </div>
                                }
                            }
                            <!-- /item -->


                        </div>



                    </section>
                    <!-- /instant transactions -->
                </div>
                @*<div class="col-md-6 match-height">*@
                <div class="thaili-slider-wrapper, col-md-6 match-height">
                    <div class="thaili-slider">
                        <div class="item">
                            <img src="~/Content/assets/img/slider/554_335Pixel-NIBL_Education-Loan_Slide.jpg" alt="slider-image1" style="border-radius: 10px;">
                        </div>

                        <div class="item">
                            <img src="~/Content/assets/img/slider/554_335Pixel-NIBL_KETA-KETI_Slide.jpg" alt="slider-image2" style="border-radius: 10px;">
                        </div>

                        <div class="item">
                            <img src="~/Content/assets/img/slider/554_335Pixel-NIBL_Re1-Account_Slide.jpg" alt="slider-image3" style="border-radius: 10px;">
                        </div>

                        <div class="item">
                            <img src="~/Content/assets/img/slider/554_335Pixel-NIBL_Recurring_Slide.jpg" alt="slider-image4" style="border-radius: 10px;">
                        </div>

                    </div>
                    <!-- /thaili-slider -->
                </div>
                <!-- /thaili-slider-wrapper -->
                @*</div>*@

            </div>
        </div>
    </div>

    <section class="section-services featured-merchant pad-50">
        <div class="container">
            <div class="title-wrapper clearfix">
                <h2 class="title">Featured Merchants</h2>
                <a href="#" class="btn btn-default show-all">Show All</a>
            </div>
            <!-- /title-wrapper -->

            <div class="transactions-grid clearfix">
                <div class="item load-wallet">
                    <a href="@Url.Action("Index", "NEA" )">
                        <div class="item-inner">
                            <div class="content-inner">
                                <i class="thaili-icon-electricity"></i>
                                <span>Electricity</span>
                            </div>
                        </div>
                    </a>
                </div>
                <!-- /item -->
                <div class="item transfer-fund">
                    <a href="@Url.Action("Index", "Khanepani" )">
                        <div class="item-inner">
                            <div class="content-inner">
                                <i class="thaili-icon-khanepani"></i>
                                <span>Khanepani</span>
                            </div>
                        </div>
                    </a>
                </div>
                <!-- /item -->
                <div class="item transfer-fund">
                    <a href="@Url.Action("Index", "NepalWater" )">
                        <div class="item-inner">
                            <div class="content-inner">
                                <i class="thaili-icon-khanepani"></i>
                                <span>Nepal Water</span>
                            </div>
                        </div>
                    </a>
                </div>
                <!-- /item -->
                <div class="item top-up">
                    <a href="~/MerchantPayment/MerchantRestaurant">
                        <div class="item-inner">
                            <div class="content-inner">
                                <i class="thaili-icon-restaurant"></i>
                                <span>Restaurant</span>
                            </div>
                        </div>
                    </a>
                </div>
                <!-- /item -->

                <div class="item recharge">
                    <a href="~/MerchantPayment/MerchantCollege">
                        <div class="item-inner">
                            <div class="content-inner">
                                <i class="thaili-icon-college"></i>
                                <span>College</span>
                            </div>
                        </div>
                    </a>
                </div>
                <!-- /item -->

                <div class="item withdraw">
                    <a href="~/MerchantPayment/MerchantSchool">
                        <div class="item-inner">
                            <div class="content-inner">
                                <i class="thaili-icon-school"></i>
                                <span>School</span>
                            </div>
                        </div>
                    </a>
                </div>
                <!-- /item -->

                <div class="item load-wallet">
                    <div class="item-inner">
                        <a href="~/Share/Index">
                            <div class="content-inner">
                                <span class="icon-icon-share"></span>
                                <span class="share-text">Share</span>
                            </div>
                        </a>
                    </div>
                </div>
            </div>

        </div>
    </section>

    <section class="section-services featured-merchant pad-50">
        <div class="container">
            <div class="title-wrapper clearfix">
                <h2 class="title">Internet Service Provider</h2>
                <a href="#" class="btn btn-default show-all">Show All</a>
            </div>
            <hr />
            <div class="transactions-grid clearfix">
                <div class="item load-wallet">
                    <div class="item-inner">
                        <a href="~/Wlink/Index">
                            <div class="content-inner">
                                <span class="icon-icon-wlink"></span>
                                <span class="wlink-text">Worldlink</span>
                            </div>
                        </a>
                    </div>
                </div>

                <div class="item load-wallet">
                    <div class="item-inner">
                        <a href="~/Subisu/Index">
                            <div class="content-inner">
                                <span class="icon-icon-subisu"></span>
                                <span class="subisu-text">Subisu</span>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="download-app bg-grey">
        <div class="container">
            <div class="row">
                <div class="col-md-5">
                    <div class="app-demo-img">
                        <img src="~/Content/assets/img/app-demo.png" alt="app-demo">
                    </div>
                </div>

                <div class="col-md-7">
                    <div class="content-inner">
                        <img src="~/Content/assets/img/playstore-icon.png" alt="playstore-icon">
                        <h2 class="title">Easy payments with a touch.</h2>
                        <p>Paying hasn't been so easier online.</p>
                        <a href="https://play.google.com/store/apps/details?id=com.thailiapp.mnepalmos" target="_blank" class="btn btn-default download-link">Download Now</a>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- /download-app -->
    @*<section class="section-partners text-center pad-50">
            <div class="container">
                <h2 class="title bordered-title"><span>Partnered Banks</span></h2>

                <div class="partner-list clearfix">
                    <div class="item match-height">
                        <img src="~/Content/assets/img/banks/purnima-bank.png" alt="purnima-bank">
                    </div>

                    <div class="item match-height">
                        <img src="~/Content/assets/img/banks/sidhartha-bank.png" alt="sidhartha-bank">
                    </div>

                    <div class="item match-height">
                        <img src="~/Content/assets/img/banks/bok.png" alt="bok">
                    </div>

                    <div class="item match-height">
                        <img src="~/Content/assets/img/banks/janata-bank.png" alt="janata-bank">
                    </div>

                    <div class="item match-height">
                        <img src="~/Content/assets/img/banks/kumari-bank.png" alt="kumari-bank">
                    </div>

                    <div class="item match-height">
                        <img src="~/Content/assets/img/banks/sanima-bank.png" alt="sanima-bank">
                    </div>

                    <div class="item match-height">
                        <img src="~/Content/assets/img/banks/century-bank.png" alt="century-bank">
                    </div>

                    <div class="item match-height">
                        <img src="~/Content/assets/img/banks/gandaki-bank.png" alt="gandaki-bank">
                    </div>

                    <div class="item match-height">
                        <img src="~/Content/assets/img/banks/mega-bank.png" alt="mega-bank">
                    </div>

                    <div class="item match-height">
                        <img src="~/Content/assets/img/banks/nb-bank.png" alt="nb-bank">
                    </div>
                </div>

                <a href="#" class="btn btn-default">Show All</a>
            </div>
        </section>*@
    <!-- /section-partner -->
</div>

<!-- /.content -->
<!-- =============================================== -->
<div class="modal fade common-modal" id="successModal" tabindex="-1" role="dialog" aria-labelledby="Success Confirmation" aria-describedby="Success Confirmation">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-body text-center">
                <div class="success-icon">
                    <img src="~/Content/assets/img/success-tick.svg" alt="success-tick">
                </div>
                <p class="msg" style="color: #00a651; font-size: 20px; font-weight: 700;">Success!</p>
                <span class="msg" style="color: #002d6a; font-size: 18px; font-weight: 400;">@this.ViewData["user_message"]</span>
                <br /> <br />
                <button type="button" class="btn btn-blue" data-dismiss="modal" style="width:80%">OK</button>
            </div>
        </div>
    </div>
</div>
<!-- Failure modal -->
<div class="modal fade common-modal" id="failureModalMsg" tabindex="-1" role="dialog" aria-labelledby="Failure Confirmation" aria-describedby="Failure Confirmation">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-body text-center">
                <div class="success-icon">
                    <img src="~/Content/assets/img/denied-cross.svg" alt="denied-cross">
                </div>
                <p style="color: #E31837; font-size: 1.111rem; font-weight: 700;" id="messageTitle"></p>
                <span style="color: #E31837; font-size: 1.111rem; font-weight: 700;" id="msg">@this.ViewData["user_message"]</span>
                <br /> <br />
                <button type="button" class="btn btn-blue" data-dismiss="modal" style="width:80%">OK</button>
            </div>
        </div>
    </div>
</div>
<!-- Failure modal -->
<div class="modal fade common-modal" id="failureModal" tabindex="-1" role="dialog" aria-labelledby="Failure Confirmation" aria-describedby="Failure Confirmation">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-body text-center">
                <div class="success-icon">
                    <img src="~/Content/assets/img/denied-cross.svg" alt="denied-cross">
                </div>
                <p style="color: #E31837; font-size: 1.111rem; font-weight: 700;" id="messageTitle"></p>
                <span style="color: #E31837; font-size: 1.111rem; font-weight: 700;" id="message"></span>
                <br /> <br />
                <button type="button" class="btn btn-blue" data-dismiss="modal" style="width:80%">OK</button>
            </div>
        </div>
    </div>
</div>
@{if (this.ViewData["user_message"] != null)
    {
        if (this.ViewData["message_class"].ToString() == "success_info")
        {
            <input type="text" name="checkMsg" value="success_info" hidden />
        }
        else
        {
            <input type="text" name="checkMsg" value="failure_info" hidden />

        }
    }
}

@*<script type="text/javascript" src="https://code.jquery.com/jquery-1.10.2.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>*@
<script type="text/javascript">
   

    function checkKYC() {
        $.ajax({
            cache: false,
            type: "GET",
            url: '@Url.Action("GetHasKYC", "UserDashboard")',
                    success: function (data, textStatus) {
                        if (data != "T") {
                            $("#messageTitle").html("");
                            $("#messageTitle").append("");
                            $("#message").html("");
                            $("#message").append("Please fill Customer KYC form to avoid restriction");
                            $('#failureModal').modal("show");
                        }
                    },
                    error: function () {
                        alert("Data Not Found");
                    }
                });
    }

    function checkBankLink() {
         $.ajax({
            cache: false,
            type: "GET",
            url: '@Url.Action("GetLnkBankAcc", "UserDashboard")',
            success: function (data, textStatus) {
                if (data != "T") {
                    $("#messageTitle").html("");
                    $("#messageTitle").append("");
                    $("#message").html("");
                    $("#message").append("Please link your bank account to get rid of restriction");
                    $('#failureModal').modal("show");
                }
            },
            error: function () {
                alert("Data Not Found");
            }
        });
    }



    $(document).ready(function () {

        var checkMsg = $("[name='checkMsg']").val();
        if (checkMsg == "success_info") {
            $('#successModal').modal();
        }
        else if (checkMsg == "failure_info") {
            $('#failureModalMsg').modal();
        }

        event.preventDefault();
        $.ajax({
            cache: false,
            type: "GET",
            url: '@Url.Action("CheckKYCRejected", "UserDashboard")',
            success: function (data, textStatus) {
                if (data.IsRejected == "T") {
                    $("#message").html("");
                    $("#message").append(data.remarks);
                    $("#messageTitle").html("");
                    $("#messageTitle").append("Customer KYC");
                    $('#failureModal').modal("show");
                }
            },
            error: function () {
                alert("Data Not Found");
            }
        });
    });



</script>
