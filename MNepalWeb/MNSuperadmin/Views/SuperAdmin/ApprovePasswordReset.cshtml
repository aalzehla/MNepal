@model IEnumerable<MNSuperadmin.Models.UserInfo>

@{
    ViewBag.Title = "SuperAdmin Approve Password Reset";
}

<section class="content-header">
    <h1>
        Super Admin
        @*<small>Approve Password Reset</small>*@
    </h1>
    <ol class="breadcrumb">
        <li><a href="#"><i class="fa fa-user"></i> SuperAdmin</a></li>
        <li class="active"> Approve Password Reset</li>
    </ol>
</section>
<section class="content">
    <!-- Main row -->
    <div class="row">

        <!-- Start -->
        <div class="col-xs-12">
            <div class="box box-primary">
                <div class="box-header with-border">
                    <h3 class="box-title">Approve Password Reset</h3>
                </div>
                @using (Html.BeginForm("ApprovePasswordReset", "SuperAdmin", FormMethod.Get, new { @id = "ApprovePasswordReset" }))
                {
                    <div class="box-body">
                        <div class="row">
                            <div class="form-group col-md-6">
                                <label for="UserName" class="control-label">User Name</label>
                                <input type="text" class="form-control col-md-6" id="UserName" name="UserName" placeholder="UserName" maxlength="20">
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group col-md-6">
                                <button type="submit" id="Search" class="btn btn-primary">Search</button>
                            </div>
                        </div>
                    </div>
                }
                <hr />

                <div class="box-body" id="grid">
                    <table id="PasswordApprove" class="table table-striped table-bordered">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>User Name</th>
                                @*<th>Branch Code</th>
                                <th>Branch Name</th>*@
                                <th>Role</th>
                                <th>Email Address</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            @if (Model.Count() > 0)
                            {
                                foreach (var item in Model)
                                {
                                    <tr id="@item.ClientCode">
                                        <td>@item.Name</td>
                                        <td>@item.UserName</td>
                                        @*<td>@item.UserBranchCode</td>
                                        <td>@item.UserBranchName</td>*@
                                        <td>@item.AProfileName</td>
                                        <td>@item.EmailAddress</td>
                                        <td>
                                            <span class="fa fa-check" style="color:green" title="Approve Password Reset" id="Approve"></span>
                                            &nbsp;&nbsp;&nbsp;
                                            <span class="fa fa-times" style="color:red" title="Revert Password Reset" id="Revert"></span>
                                        </td>
                                    </tr>
                                }
                            }
                            else
                            {
                                <tr>
                                    <td colspan="6" style="text-align:center">NO RECORDS FOUND!</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>

            </div>
        </div>
    </div>
</section>

@section scripts{

    <script type="text/javascript">



        $('#PasswordApprove').DataTable({
                "ordering": false,
                "filter": false,
                "sorting": false,
                "info": false,
                "lengthChange": false
            });
        $('#PasswordApprove tbody tr').on('click', 'td .fa', function ()
        {
                var tr = $(this).parents('tr');
                var ClientCode = tr.attr('id');
                var Name = tr.find('td').eq(0).html();
                var ActionClick = $(this).attr('id');


                $.ajax({

                    url: '@Url.Action("PasswordResetApprove", "SuperAdmin")',
                    data: { ClientCode: ClientCode, Name: Name, ActionClick: ActionClick},
                    type: 'GET',
                    success: function (data) {
                        if (data.StatusCode == 200) //success
                        {
                            alertify.success(data.StatusMessage);
                            tr.remove();

                        }
                        else
                        {
                            alertify.error(data.StatusMessage);
                        }
                    },
                    error:function(data)
                    {
                        alertify.error(data.StatusMessage);
                    }
                });
            });

    </script>
}
