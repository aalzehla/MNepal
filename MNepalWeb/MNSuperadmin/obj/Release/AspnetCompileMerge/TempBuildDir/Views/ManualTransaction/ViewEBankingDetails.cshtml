
@model MNSuperadmin.Models.EBankingManualTran

@{
    ViewBag.Title = "ViewEBankingDetails";
}

<style>
    tr.spaceUnder > td {
        padding-bottom: 1.5em;
    }
</style>
<!-- Content Header (Page header) -->

<section class="content-header">
    <h1>
        EBanking Verify
        @*<small>View Customer Support</small>*@
    </h1>
    <ol class="breadcrumb">
        <li><a href="#"><i class="fa fa-user"></i>EBanking Verify</a></li>
        <li class="active"> View EBanking Verify Details</li> 
    </ol>
</section>

<!-- Main content -->
<section class="content">
    <!-- Main row -->
    <div class="row">

        <!-- Start -->
        <div class="col-xs-12">

            <!-- Start Data Show in Table -->
            <div class="box box-primary" id="CustomerModify">
                <div class="box-header with-border">
                    <h3 class="box-title">EBanking Verify  Details</h3>
                </div>
                <!-- /.box-header -->

                <div class="box box-danger">
                    <div class="box-body">
                        @using (Html.BeginForm("VerifyEBankingTransaction", "ManualTransaction", FormMethod.Post, new { @id = "ViewCustomerSupport", @class = "ViewCustomerSupport", @enctype = "multipart/form-data" }))
                        {
                            @Html.AntiForgeryToken()
                            @Html.ValidationSummary(true)

                            <!--ClientCode-->
                            @*@Html.HiddenFor(x => x.ClientCode)*@
                            <!--Name-->
                            @*@Html.HiddenFor(x => x.Name)*@

                            if (this.TempData["custmodify_messsage"] != null)
                            {
                                if (this.TempData["message_class"].ToString() == "success_info")
                                {
                                    <div class="alert alert-success">
                                        <button type="button" class="close" data-dismiss="alert">&times;</button>
                                        <h4>Success</h4> @this.TempData["custmodify_messsage"]
                                    </div>
                                }
                                else
                                {
                                    <div class="alert alert-danger">
                                        <button type="button" class="close" data-dismiss="alert">&times;</button>
                                        <h4>Error</h4> @this.TempData["custmodify_messsage"]
                                    </div>
                                }
                            }

                            <!-- Start -->

                            <!-- /.box -->

                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label class="control-label col-sm-4">Requested Date and Time:@*<b style="color:red;">*</b>*@</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control" id="Reqdate" name="Reqdate" value="@Model.Reqdate" readonly />

                                        </div>
                                    </div>
                                </div>
                            </div>

                            <br />
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label class="control-label col-sm-4">Payment Reference Number:</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control" id="PRN" name="PRN" value="@Model.PRN" readonly />

                                        </div>
                                    </div>
                                </div>
                            </div>

                            <br />

                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label class="control-label col-sm-4">ItemCode:@*<b style="color:red;">*</b>*@</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control" id="ItemCode" name="ItemCode" value="@Model.ItemCode" readonly />

                                        </div>
                                    </div>
                                </div>
                            </div>

                            <br />

                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label class="control-label col-sm-4">Amount:@*<b style="color:red;">*</b>*@</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control" id="Amount" name="Amount" value="@Model.Amount" readonly />

                                        </div>
                                    </div>
                                </div>
                            </div>

                            <br />

                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label class="control-label col-sm-4">Reference Number:@*<b style="color:red;">*</b>*@</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control" id="ReferenceNo" name="ReferenceNo" value="@Model.ReferenceNo" readonly />

                                        </div>
                                    </div>
                                </div>
                            </div>

                            <br />

                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label class="control-label col-sm-4">Mobile Number:@*<b style="color:red;">*</b>*@</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control" id="MobileNo" name="MobileNo" value="@Model.MobileNo" readonly />

                                        </div>
                                    </div>
                                </div>
                            </div>

                            <br />

                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label class="control-label col-sm-4">Name:@*<b style="color:red;">*</b>*@</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control" id="Name" name="Name" value="@Model.Name" readonly />

                                        </div>
                                    </div>
                                </div>
                            </div>

                            <br />
                            <div id="TranStatus">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="control-label col-sm-4">BID:@*<b style="color:red;">*</b>*@</label>
                                            <div class="col-sm-6">
                                                <input type="text" class="form-control" id="BID" name="BID" value="@Model.BID" readonly />

                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <br />

                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="control-label col-sm-4">Status:@*<b style="color:red;">*</b>*@</label>
                                            <div class="col-sm-6">
                                                <input type="text" class="form-control" id="Status" name="Status" value="@Model.Status" readonly />

                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <br />
                            </div>

                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <div class="col-sm-6">

                                            <input type="button" class="btn btn-primary" id="GetDetails" name="btnCommand" value="Get Details" />
                                            <button class="btn btn-primary" id="Verify" name="btnCommand" value="Verify">Verify</button>

                                        </div>
                                    </div>
                                </div>
                            </div>

                            

                        }

                    </div>
                        <!-- /.box -->

                </div>

             </div>

        </div>

    </div>
</section>
<!-- /.content -->
@section scripts {
    <script type="text/javascript">

        $(document).ready(function () {
            $('#TranStatus').hide();
            $('#Verify').hide();
            
            var val = $('input[type=radio][name=MaritalStatus]:checked').val();
            if (val != "Dis") {

                $('#family').show();
            }
            else {

                $('#family').hide();
            }
        });

        $('#GetDetails').click(function (e) {
            e.preventDefault();
            var PRN = $("[name='PRN']").val();
            var Amount = $("[name='Amount']").val();
            var ItemCode = $("[name='ItemCode']").val();
            debugger;
            if ((PRN != "") && (Amount != 0) && (ItemCode != "")) {

                var dataToPost = {
                    PRN: PRN,
                    Amount: Amount,
                    ItemCode: ItemCode
                };

                 e.preventDefault(); //prevent the default action
                 $.ajax({

                    url: '@Url.Action("GetTransactionDetails", "ManualTransaction")',
                    type: "POST",
                    data: dataToPost,
                    cache: false,
                    async: false,
                    success: function (data, textStatus, jqXHR) {
                        if ((textStatus == "success") && (data.responseCode == "200")) {
                            debugger;
                            $("#BID").val(data.responseText);
                            $('#Status').val(data.status);

                            $('#TranStatus').show();
                            $('#Verify').show();
                            $("#ajaxResponse").show();
                            
                        }
                        
                        //display error message
                        else
                        {
                            $("#ajaxResponse").html("");

                            alert('Failed to retrieve.');
                        }
                    },
                    error: function (jqXHR, textStatus, errorThrown) {
                        alert('Failed to retrieve.');
                    },
                    //capture the request before it was sent to server
                    beforeSend: function (jqXHR, settings) {
                        //adding some Dummy data to the request
                        settings.data += "&dummyData=whatever";
                        //disable the button until we get the response
                        $('#Verify').attr("disabled", true);
                    },
                    complete: function (jqXHR, textStatus) {
                        //enable the button
                        $('#Verify').attr("disabled", false);
                    }
                });

            }
             else
            {
                alert('Failed to retrieve.');
            }
        });
        

    </script>
}
