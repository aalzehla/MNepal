
@{
    ViewBag.Title = "Merchant Password/T-Pin Reset";
}

<!-- =============================================== -->
<!-- Content Header (Page header) -->
<section class="content-header">
    <h1>
        Merchant
        @*<small>Password/T-Pin Reset</small>*@
    </h1>
    <ol class="breadcrumb">
        <li><a href="#"><i class="fa fa-user"></i> Merchant</a></li>
        <li class="active">Password/T-Pin Reset</li>
    </ol>
</section>

<!-- Main content -->
<section class="content">
    <!-- Main row -->
    <div class="row">

        <!-- Start -->
        <div class="col-xs-10" id="PinReset">

            <div class="box box-success">
                <div class="box-header with-border">
                    <h3 class="box-title">Password/T-Pin List</h3>
                </div>
                <!-- /.box-header -->
                @if (this.TempData["pinreset_messsage"] != null)
                {
                    if (this.TempData["message_class"].ToString() == "success_info")
                    {
                        <div class="alert alert-success">
                            <button type="button" class="close" data-dismiss="alert">&times;</button>
                            <h4>Success</h4> @this.TempData["pinreset_messsage"]
                        </div>
                    }
                    else
                    {
                        <div class="alert alert-danger">
                            <button type="button" class="close" data-dismiss="alert">&times;</button>
                            <h4>Error</h4> @this.TempData["pinreset_messsage"]
                        </div>
                    }
                }
                <div class="box-body">

                    <div class="form-group">
                        <div class="row">
                            <div class="form-group col-md-6">
                                <label>Mobile Number</label>
                                <input type="text" class="form-control col-md-6" id="mobileNo" name="searchMobileNo" placeholder="Mobile Number" maxlength="10" onkeypress="return isNumberKey(event)" required />
                                @*<label id="check"> Please use valid Mobile Number </label>*@
                            </div>
                        </div>
                    </div>

                </div>
                <!-- /.box-body -->
                <div class="box-footer">
                    <div class="form-group">
                        <input type="submit" class="btn btn-primary" id="btnSearch" name="txtSearch" value="Search" />
                    </div>
                </div>

            </div>
            <!--/.box -box-success-->

            @Html.Action("PinResetDetail")

        </div>
        <!-- /.col-xs--->
        <!-- End-->

    </div>
    <!-- /.row -->
</section>
<!-- /.content -->
<!-- =============================================== -->

@section scripts{

    <script>

        $("#MobileNo").hide();
        $("#PinResetDetail").hide();

        $("input[type='radio']").change(function () {

            if ($(this).val() == "Mobile Number") {
                $("#MobileNo").show();
            }

        });


        function isNumberKey(evt) {
            evt = (evt) ? evt : window.event;
            var charCode = (evt.which) ? evt.which : evt.keyCode;
            if (charCode != 46 && charCode > 31
                && (charCode < 48 || charCode > 57))
                return false;

            return true;
        }




        $('#btnSearch').click(function (e) {

            var mobileNo = $('#mobileNo').val();

            e.preventDefault();

            $.ajax({
                url: '@Url.Action("PinResetDetail", "Merchant")',
                type: 'GET',
                data: {
                    txtMobileNo: mobileNo
                },
                success: function (results) {
                    $('#PinResetDetail').html(results);
                    $("#PinResetDetail").show();
                },
                error: function () {
                    alert('Error Occured!!');
                }
            });

        });



        /**Validation Check */
        $('#PinReset').bootstrapValidator({
            //feedbackIcons: {
            //    valid: 'glyphicon glyphicon-ok',
            //    invalid: 'glyphicon glyphicon-remove',
            //    validating: 'glyphicon glyphicon-refresh'
            //},
            fields: {
                searchMobileNo: {
                    validators: {
                        notEmpty: {
                            message: 'The Mobile no cannot be empty'
                        },
                        regexp: {
                            regexp: '^[9][8]\\d{8}$',
                            message: 'Mobile no must start with 98 and should be 10 digits'
                        }
                    }
                }

            }
        });





    </script>
}

