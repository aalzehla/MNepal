@model MNepalWeb.Models.UserInfo
@{
    ViewBag.Title = "PasswordReset";
}

<!-- Content Header (Page header) -->
<section class="content-header">
    <h1>
        Admin
        @*<small>Password Reset</small>*@
    </h1>
    <ol class="breadcrumb">
        <li><a href="#"><i class="fa fa-user"></i> Admin</a></li>
        <li class="active"> Password Reset</li>
    </ol>
</section>

<!-- Main content -->
<section class="content">
    <!-- Main row -->
    <div class="row">

        <!-- Start Form -->

        <div class="col-md-12">
            <div class="box box-primary">
                <div class="box-header with-border">
                    <h3 class="box-title">Admin Password Reset</h3>
                </div>
                <!-- /.box-header -->
                <div class="box-body">

                    @*<table id="t01" class="table table-bordered table-striped">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>UserName</th>
                                <th>UserType</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        @foreach (var item in Model)
                        {
                            <tr>
                                <td>
                                    @item.Name - @item.ClientCode
                                </td>

                                <td>
                                    @item.UserName
                                </td>
                                <td>
                                    @item.UserType
                                </td>
                                <td>
                                    @*<a href="@Url.Action("PasswordReset","Admin", new {id = @item.ClientCode } )">
                                            <i class="fa fa-key"></i>
                                            Password Reset
                                        </a>
                                    <input type="hidden" class="form-control" id="clientCode1" name="txtClientCode" value="@item.ClientCode" />
                                    <a href="#activity" id="showPwdContent" data-toggle="tab" onclick="return gotoNode(@item.ClientCode)">
                                        <i class="fa fa-key"></i> Reset
                                    </a>
                                </td>
                                @*<td>
                                        @item.ClientCode
                                    </td>
                            </tr>
                        }

                    </table>*@

@using (Html.BeginForm("PassReset", "Admin", FormMethod.Post, new { @id = "form" }))
{
    @Html.AntiForgeryToken()
    @Html.ValidationSummary(true)

    if (this.ViewData["password_messsage"] != null)
    {
        if (this.ViewData["message_class"].ToString() == "success_info")
        {
            <div class="alert alert-success">
                <button type="button" class="close" data-dismiss="alert">&times;</button>
                <h4>Success</h4> @this.ViewData["password_messsage"]
            </div>
        }
        else
        {
            <div class="alert alert-danger">
                <button type="button" class="close" data-dismiss="alert">&times;</button>
                <h4>Error</h4> @this.ViewData["password_messsage"]
            </div>
        }
    }

                    <div class="col-md-10" id="contentPwdReset">
                        <div class="nav-tabs-custom">
                            @*<ul class="nav nav-tabs">
                                <li class="active"><a href="#activity" data-toggle="tab">Password Reset</a></li>
                            </ul>*@
                            <div class="tab-content">
                                <div class="active tab-pane" id="activity">

                                    
                                        <div class="box">
                                            <div class="box-header with-border">
                                                <h3 class="box-title"><strong><i class="fa fa-user fa-key"></i> Password Reset</strong></h3>
                                            </div>
                                            <div class="box-body">
                                                <div class="form-group">
                                                    <div style="display:none;">
                                                        <input type="hidden" class="form-control" id="clientCode" name="txtClientCode" value="@Model.ClientCode" />
                                                        <input type="hidden" class="form-control" id="emailAddress" name="txtEmail" value="@Model.EmailAddress" />
                                                        <input type="hidden" class="form-control" id="Name" name="txtName" value="@Model.Name" />
                                                        <input type="hidden" class="form-control" id="UserName" name="txtUserName" value="@Model.UserName" />
                                                    </div>
                                                    <div class="form-group">
                                                        <label>Name:</label> @Model.Name<br/>
                                                        <label>User Name:</label> @Model.UserName<br />
                                                        <label>Email Address:</label>@Model.EmailAddress<br />
                                                    </div>
                                                    <div>
                                                    
                                                       <p>Note: The new password will be sent to the registerd email address.</p>    

                                                    </div>
                                                    @*<label>Email Address</label>
                                                    <input type="text" class="form-control" id="Email" name="txtEmail" placeholder="Email Address" required="required">*@
                                                </div>
                                            </div>
                                            <div class="box-footer">
                                                <button type="submit" class="btn btn-primary" id="btnCommand" name="btnCommand" value="Reset">Reset</button>
                                            </div>
                                            
                                        </div>
                                    
                                </div>
                                <!-- /.tab-pane -->
                            </div>
                            <!-- /. tab-content-->
                        </div>
                        <!-- /.nav-tabs-custom -->
                    </div>
                    <!-- /.col-md-9-->
}

                </div>

            </div>
        </div>
        <!--End Form -->

    </div>
    <!-- /.row -->
</section>
<!-- /.content -->


@section scripts {

    <!-- Load jQuery and the validate plugin -->
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.10.2.js"></script>

    <script src='http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
    <script src='http://cdnjs.cloudflare.com/ajax/libs/bootstrap-validator/0.4.5/js/bootstrapvalidator.min.js'></script>
   
    <!-- jQuery Form Validation code -->

    <script type="text/javascript">
        /**Validation Check */


        $(document).ready(function () {
            $("#showPwdContent").click(function () {
                $("#contentPwdReset").show();
            });

            $('#form').bootstrapValidator({
                feedbackIcons: {
                    valid: 'glyphicon glyphicon-ok',
                    invalid: 'glyphicon glyphicon-remove',
                    validating: 'glyphicon glyphicon-refresh'
                },
                fields: {

                    //txtPassword: {
                    //    validators: {
                    //        stringLength: {
                    //            max: 12,
                    //            min: 8,
                    //            message: 'The Password must be more than 8 and less than 12 characters long'
                    //        }
                    //    }
                    //}

                }

            });




        });

        function gotoNode(name) {
            var input = document.getElementById('clientCode1');
            document.getElementById('clientCode').value = input.value.toString();
        }

       


    </script>
}
