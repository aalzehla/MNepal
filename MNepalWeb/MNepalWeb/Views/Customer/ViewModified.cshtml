@model IEnumerable<MNepalWeb.Models.UserInfo>
@{
    ViewBag.Title = "Customer Approve Modified";
}
<section class="content-header">
    <h1>
        Customer
        @*<small>Approve Modified</small>*@
    </h1>
    <ol class="breadcrumb">
        <li><a href="#"><i class="fa fa-user"></i> @ViewContext.RouteData.Values["Controller"].ToString()</a></li>
        <li class="active">@*@ViewContext.RouteData.Values["Action"].ToString()*@ Approve Modified</li>
    </ol>
</section>

<!-- Main content -->
<section class="content">
    <!-- Main row -->
    <div class="row">
        <div class="col-md-12">
            <!-- Start Form -->
            <!-- Start Data Show in Table -->
            <div id="CustomerApprove" class="box box-primary">
                <div class="box-header with-border">
                    <h3 class="box-title">Approve Modified</h3>
                </div>
                <!-- /.box-header -->


                @if (this.ViewData["custapprove_messsage"] != null)
                {
                    if (this.ViewData["message_class"].ToString() == "success_info")
                    {
                        <div class="alert alert-success">
                            <button type="button" class="close" data-dismiss="alert">&times;</button>
                            <h4>Success</h4> @this.ViewData["custapprove_messsage"]
                        </div>
                    }
                    else
                    {
                        <div class="alert alert-danger">
                            <button type="button" class="close" data-dismiss="alert">&times;</button>
                            <h4>Error</h4> @this.ViewData["custapprove_messsage"]
                        </div>
                    }
                }

                <div class="box-body">

                    <div class="box box-primary">
                        @using (Html.BeginForm("ViewModified", "Customer", FormMethod.Get,new {@id = "ViewModified" }))
                        {
                            <div class="box-body">
                                <div class="row">
                                    <!-- radio -->
                                    <div class="form-group">
                                        <div class="radio col-md-12">
                                            <div class="col-md-12">
                                                <label>
                                                    <input type="radio" name="Key" id="optionsRadios1" value="Mobile" checked />
                                                    <b>Mobile Number</b>
                                                </label>

                                            </div>
                                        </div>
                                    </div>


                                    <div>
                                        <hr />
                                    </div>

                                    <div class="form-group" id="form">
                                        <div class="col-md-6 form-group">
                                            <input type="text" class="form-control" id="txtMobileNoID" name="Value" placeholder="Mobile Number" maxlength="10" onkeypress="return isNumberKey(event);" value="@ViewBag.Value" required>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        <!-- /.box-body -->
                            <div class="box-footer">
                                <input type="submit" class="btn btn-primary" id="btnSearch" name="txtSearch" value="Search" />
                            </div>
                        }


                    </div>


                    @*@if (Model.Count() == 0)
                    {
                        <div class="panel-body">
                            <b>No Result Found !! </b>
                        </div>
                    }*@
                   
                        <table class="table table-responsive" id="users">
                            <thead>
                                <tr>
                                    @*<th>@Html.CheckBox("chkSelectAllCus1", false)</th>*@

                                    <th>Mobile Number</th>
                                    <th>Customer Name</th>
                                    <th>Account No</th>
                                    <th>Modifying Branch</th>
                                    <th>Modified By</th>
                                    <th>Details</th>

                                </tr>
                            </thead>
                            <tbody style="text-align:left">
                                @if (Model.Count() > 0)
                                {
                                    foreach (var item in Model)
                                    {
                                      
                                 <tr>
                                     <td>@item.ContactNumber1</td>
                                     <td>@item.Name</td>
                                     <td>@item.BankAccountNumber</td>
                                     <td>@item.ModifyingBranch</td>
                                     <td>@item.ModifyingAdmin</td>
                                     <td>
                                         <a href="@Url.Action("ViewModifyDetail", "Customer", new { id = item.ClientCode })"><i class="fa fa-eye" title="View"></i></a>
                                     </td>
                                 </tr>
                               
                                    }
                                 }
                                    else if(Model.Count()==0 && !string.IsNullOrEmpty(ViewBag.Value))
                                    {
                                    <tr>
                                        <td colspan="5" style="text-align:center">No Records Found</td>
                                    </tr>
                                    }
                               </tbody>
                        </table>
                                    
                </div>
                <!-- /.box-body -->
                <div>
                    @*<input id="btnSelApprove" name="btnSelApprove" type="button" class="btn btn-primary pull-right" value="Select and Approve" />
                        &nbsp;&nbsp;
                        <input id="btnSelReject" name="btnSelReject" type="button" class="btn btn-primary pull-right" value="Reject" />*@
                </div>
            </div>

        </div>
    </div>
    <!-- /.row -->
</section>
<!-- /.content -->

@section scripts {
    <script type="text/javascript">

        function isNumberKey(evt) {
            evt = (evt) ? evt : window.event;
            var charCode = (evt.which) ? evt.which : evt.keyCode;
            if (charCode != 46 && charCode > 31
                && (charCode < 48 || charCode > 57))
                return false;

            return true;
        }    

        $(document).ready(function () {

            $('#chkSelectAllCus1').click(function () {
                let status = false;
                status = document.getElementById('chkSelectAllCus1').checked;

                var cus = document.getElementsByName('chkbxGroup');
                for (let i = 0; i < cus.length; i++)
                {
                    cus[i].checked = status;
                }
            });
            
        $('#users').DataTable({
            "ordering": false,
            "filter": false,
            "sorting": false,
            "info": false,
            "lengthChange": false
            });

        


            @*$('#btnSelApprove').click(function (e) {
                debugger;
                var selCus = new Array() ;

                $('input:checkbox[name=chkbxGroup]:checked').each(function () {
					selCus.push(this.value);
				});

                alert('ClientCode: '+ selCus + ' sent to approval');
				document.location = '@Url.Action("Approve", "Customer")' + $.param({cus=selCus});

            });

            $('btnSelReject').click(function () {

            });*@

        });

        /**Validation Check */
        $('#ViewModified').bootstrapValidator({
            //feedbackIcons: {
            //    valid: 'glyphicon glyphicon-ok',
            //    invalid: 'glyphicon glyphicon-remove',
            //    validating: 'glyphicon glyphicon-refresh'
            //},
            fields: {
                Value: {
                    validators: {
                        stringlength: {
                            min: 10,
                            max: 10,
                            message: 'Please enter valid Mobile No'

                        },
                        regexp: {
                            regexp: '^[9][8][0-9]{8}$',
                            message: 'Mobile no must start with 98 and should be 10 digits'

                        }
                    }
                }


            }

        });


    </script>
}
<!-- =============================================== -->
