@model MNepalWeb.ViewModel.ChargeVM
@{
    ViewBag.Title = "DeductCharge";
}
<section class="content">

    <div class="row">
        <div class="col-md-6">
            <!-- general form elements -->
            <div class="box box-primary">
                <div class="box-header with-border">
                    <h3 class="box-title">Info</h3>
                </div>
                <!-- /.box-header -->
                <!-- form start -->
                @using (Html.BeginForm("RenewCust", "Customer", FormMethod.Post))
                {


                    @Html.HiddenFor(x => x.UserInfo.UserName)
                    @Html.HiddenFor(x => x.UserInfo.ClientCode)

                    if (this.ViewData["Custmessage"] != null)
                    {
                        if (this.ViewData["messageclass"].ToString() == "success_info")
                        {
                            <div class="alert alert-success">
                                <button type="button" class="close" data-dismiss="alert">&times;</button>
                                <h4>Success</h4> @this.ViewData["Custmessage"]
                            </div>
                        }
                        else
                        {
                            <div class="alert alert-danger">
                                <button type="button" class="close" data-dismiss="alert">&times;</button>
                                <h4>Error</h4> @this.ViewData["Custmessage"]
                            </div>
                        }
                    }

                    <div class="box-body">

                        <table style="width:100%">
                            <tr>
                                <td>Name</td>
                                <td>: </td>
                                <td>@Model.UserInfo.Name</td>
                            </tr>
                            <tr>
                                <td>Account Number</td>
                                <td>: </td>
                                <td>@Model.UserInfo.BankAccountNumber</td>
                            </tr>
                            <tr>
                                <td>UserName</td>
                                <td>: </td>
                                <td>@Model.UserInfo.UserName</td>
                            </tr>
                            <tr>
                                <td>Address</td>
                                <td>: </td>
                                <td>@Model.UserInfo.Address</td>
                            </tr>
                            <tr>
                                <td>Current Profile</td>
                                <td>: </td>
                                <td>@Model.ProfileCharge.ProfileCode</td>
                            </tr>
                            <tr>
                                <td>Status</td>
                                <td>: </td>
                                <td>@Model.UserInfo.Status</td>
                            </tr>
                            <tr>
                                <td>Extension Period</td>
                                <td>: </td>
                                <td>@Model.CustProfile.RenewPeriod Months</td>
                            </tr>
                            <tr>
                                <td>Renew Charge Amount</td>
                                <td>: </td>
                                <td>@Model.ProfileCharge.ReNew</td>
                            </tr>
                        </table>

                        @*<fieldset>
                                  <legend>Charges</legend>


                            <table style="width:45%">
                                      <tr>
                                          <td>Registration Charge</td>
                                          <td>:</td>
                                          <td>@Model.ProfileCharge.Registration</td>
                                          <td>@Html.CheckBoxFor(x => x.ChargeReg)</td>
                                      </tr>
                                      <tr>
                                          <td>Pin Reset</td>
                                          <td>:</td>
                                          <td>@Model.ProfileCharge.PinReset</td>
                                          <td>@Html.CheckBoxFor(x => x.ChargePinReset)</td>
                                      </tr>
                                      <tr>
                                          <td>Renew Charge</td>
                                          <td>:</td>
                                          <td>@Model.ProfileCharge.ReNew</td>
                                          <td>@Html.CheckBoxFor(x => x.ChargeRenew)</td>
                                      </tr>
                                  </table>

                        </fieldset>*@
                        <input type="submit"  value="Deduct" class="btn btn-primary pull-right" title="Deducts charge from customer bank account"/>
                    </div>


                }
            </div>

        </div>


        <!--for past charge history-->
        <div class="col-md-6">
            <!-- general form elements -->
            <div class="box box-primary">
                <div class="box-header with-border">
                    <h3 class="box-title">Past Charge History of @Model.UserInfo.Name</h3>
                </div>
                <!-- /.box-header -->
                <!-- form start -->
                <table class="table table-striped" id="charge">
                    <thead>
                        <tr>
                            <td>Description</td>
                            <td>Amount</td>
                            <td>Date</td>
                            <td>Processed By</td>
                            <td>Reference No</td>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model.ChargeLogs)
                        {
                            <tr>
                                <td>@item.ChargeDescription</td>
                                <td>@item.ChargeAmount</td>
                                <td>@item.DeductedDate</td>
                                <td>@item.ProcessedBy</td>
                                <td>@item.RRNumber</td>

                            </tr>
                        }
                    </tbody>
                </table>
            </div>

        </div>

    </div> <!--row-->
</section>


@section scripts{
    <script>
        $('#charge').DataTable({
            "ordering": false,
            "filter": false,
            "sorting": false,
            "info": false,
            "lengthChange": false
        });

    </script>
}