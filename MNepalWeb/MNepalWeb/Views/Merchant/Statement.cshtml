@model MNepalWeb.ViewModel.MerchantSmtVM

@{
    ViewBag.Title = "Statement";

}


<link href="~/Content/plugins/jquery-ui/jquery-ui-1.12.1.custom/jquery-ui.css" rel="stylesheet" />

<!-- =============================================== -->
<!-- Content Header (Page header) -->
<section class="content-header">
    <h1>
        Merchant Statement
        <small>Report</small>
    </h1>
    <ol class="breadcrumb">
        <li><a href="#"><i class="fa fa-user"></i>Merchant Statement</a></li>
        <li class="active">Report</li>
    </ol>
</section>

<!-- Main content -->
<section class="content">
    <!-- Main row -->
    <div class="row">

        <!-- Start -->
        <div class="col-xs-12">

            <div class="box box-primary">
                <div class="box-header with-border">
                    <h3 class="box-title">Search Criteria for Merchant Statement</h3>
                </div>
                <!-- /.box-header -->
                <!-- /.box-header -->
                @using (Html.BeginForm("Statement", "Merchant", FormMethod.Post, new { @id = "Smtform" }))
                {
                <!--Search-->
                    <div class="box-body">
                        <div class="row">

                            @*<div>
                                    <hr />
                                </div>*@

                            <div class="form-group" id="form">
                                <div id="Mobile No" class="col-md-2 form-group">
                                    <label>Mobile No</label>
                                    @Html.TextBoxFor(x => x.Parameter.MobileNo, new { @id = "MobileNo", @class = "form-control", @maxlength = "10", pattern = @"[9][8][0-9]{8}" })

                                </div>


                                <div id="dateRange">


                                    <div class="form-group">
                                        <div class="col-md-2 form-group">
                                            <label>From</label>
                                            @Html.TextBoxFor(x => x.Parameter.StartDate, new { @id = "StartDate", @class = "form-control", @maxlength = "10", @placeholder = "DD/MM/YYYY" })


                                        </div>
                                        <div class="col-md-2 form-group">
                                            <label>To</label>
                                            @Html.TextBoxFor(x => x.Parameter.EndDate, new { @id = "EndDate", @class = "form-control", @maxlength = "10", @placeholder = "DD/MM/YYYY" })


                                        </div>
                                    </div>

                                </div>

                             
                            </div>


                        </div>

                    </div>
                <!-- /.box-body -->
                    <div class="box-footer">
                        <input type="submit" class="btn btn-primary" id="btnSearch" name="txtSearch" value="Search" />
                    </div>
                }
                <!-- /.box-footer -->
                <!-- /.box-body -->
            </div>
            <div id="data" class="box box-primary">
                <!--Report List-->
                <div class="box-body">
                    @{ if (Model.SmtInfo.Count > 0)
                        {
                            <span class="fa fa-2x fa-file-excel-o pull-right" style="color:green;display:none;" title="To Excel" id="ToExcel"></span>
                            <table id="SearchResultTable" class="table table-striped table-bordered">
                                <thead>
                                    <tr>
                                        <th>TranDate</th>
                                        <th>TranID</th>
                                        <th>Initiator Mobile No</th>
                                        <th>Dr Amount</th>
                                        <th>Cr Amount</th>
                                        <th>Description</th>
                                        <th>Value Date</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (var item in Model.SmtInfo)
                                    {
                                        <tr>
                                            <td>@item.TranDate</td>
                                            <td>@item.TranID</td>
                                            <td>@item.InitiatorMobileNo</td>
                                            <td>@item.DrAmount</td>
                                            <td>@item.CrAmount</td>
                                            <td>@item.Description</td>
                                            <td>@item.ValueDate</td>

                                        </tr>
                                    }
                                </tbody>

                            </table>





                        }
                        else
                        {
                            if (ViewBag.message != null)
                            {
                                <h5>No Records Found.</h5>
                            }
                        }



                    }
                </div>
            </div>
            <!--Report List-->
        </div>

    </div>
    <!-- /.col-xs--->
    <!-- End-->
    <!-- /.row -->
</section>
<!-- /.content -->
<!-- =============================================== -->
@section scripts{
    <script src="~/Content/plugins/jquery-ui/jquery-ui-1.12.1.custom/jquery-ui.js"></script>
    <script src="../../Scripts/jquery-1.3.2.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $('#showhidetarget').hide();

            $('a#showhidetrigger').click(function () {
                $('#showhidetarget').toggle(400);
            });
        });
    </script>

    <script type="text/javascript">

        $(document).ready(function () {
            //test
            //$("#StartDate").datepicker().datepicker("setDate", new Date());
            //$("#EndDate").datepicker().datepicker("setDate", new Date());
            ///////
            $("#StartDate").datepicker(
                {
                    dateFormat: 'dd/mm/yy',
                    maxDate: new Date,
                    onSelect: function (dateText) {
                        var from = $('#EndDate').val().split("/");
                        if (from != "") {
                            var EDate = new Date(from[2], from[1] - 1, from[0]);
                            var to = dateText.split("/");
                            var SDate = new Date(to[2], to[1] - 1, to[0]);;
                            if (SDate > EDate) {
                                $('#EndDate').val("");
                                $('#message').text('End Date cannot be less than Start Date');
                            }
                            else {
                                $('#message').text("");
                            }
                        }
                    },
                    showAnim: "slideDown"
                });


            $("#EndDate").datepicker(
                {
                    dateFormat: 'dd/mm/yy',
                    maxDate: new Date,
                    onSelect: function (dateText) {
                        var from = $('#StartDate').val().split("/");
                        if (from != "") {
                            var SDate = new Date(from[2], from[1] - 1, from[0]);
                            var to = dateText.split("/");
                            var EDate = new Date(to[2], to[1] - 1, to[0]);;
                            if (EDate < SDate) {
                                debugger;
                                $('#EndDate').val("");
                                $('#message').text('End Date cannot be less than Start Date');
                            }
                            else {
                                $('#message').text("");
                            }
                        }
                    },
                    showAnim: "slideDown"



                });







        });

        $(document).ready(function () {
            $.validator.addMethod("pattern", function (value, element, param) {
                if (this.optional(element)) {
                    return true;
                }
                if (typeof param === "string") {
                    param = new RegExp("^(?:" + param + ")$");
                }
                return param.test(value);
            }, "Invalid format.");

            //$('#Merchantform').validate({


            //    highlight: function (label) {

            //        $(label).closest('.form-group').addClass('has-error');
            //    },

            //    unhighlight: function (label) {
            //        $(label).closest('.form-group').removeClass('has-error');
            //    }



            //});


        });


    </script>
}






