
@{
    ViewBag.Title = "CreateAdminProfile";
}

@model MNepalWeb.Models.UserProfilesInfo

<!-- =============================================== -->
<!-- Content Header (Page header) -->
<section class="content-header">
    <h1>
        Create Admin Profile
        <small>Create Profile</small>
    </h1>
    <ol class="breadcrumb">
        <li><a href="#"><i class="fa fa-dashboard"></i> Dashboard</a></li>
        <li class="active">AdminProfile</li>
    </ol>
</section>

<!-- Main content -->
<section class="content">
    <!-- Main row -->
    <div class="row">

        <!-- Start Form -->
        <div class="col-md-12">
            <div class="box box-primary">
                <div class="box-header with-border">
                    <h3 class="box-title">Create Admin Profile</h3>
                </div>
                <!-- /.box-header -->
                @using (Html.BeginForm("CreateAdminProfile", "UserSetup", FormMethod.Post, new
                {
                    @id = "CreateAdminForm",
                    @class = "form-horizontal"
                }))
                {
                    @Html.AntiForgeryToken()
                    @Html.ValidationSummary(true, "", new { @class = "text-danger" })

                    if (ViewData["adminprofile_messsage"] != null)
                    {
                        if (ViewData["message_class"].ToString() == "success_info")
                        {
                            <div class="alert alert-success">
                                <button type="button" class="close" data-dismiss="alert">&times;</button>
                                <h4>Success</h4> @this.ViewData["adminprofile_messsage"]
                            </div>
                        }
                        else
                        {
                            <div class="alert alert-danger">
                                <button type="button" class="close" data-dismiss="alert">&times;</button>
                                <h4>Error</h4> @this.ViewData["adminprofile_messsage"]
                            </div>
                        }
                    }

                    <div class="box-body">
                        <div class="row">
                            <div class="col-md-10">

                                <div class="form-group">
                                    @Html.LabelFor(model => model.ProfileName, htmlAttributes: new { @class = "control-label col-md-2" })
                                    <div class="col-md-10">
                                        @Html.EditorFor(model => model.ProfileName, new { htmlAttributes = new { @class = "form-control",@maxlength="20" } })
                                     
                                        <span id="check"></span>
                                    </div>
                                </div>

                                <div class="form-group">
                                    @Html.LabelFor(model => model.ProfileDesc, htmlAttributes: new { @class = "control-label col-md-2" })
                                    <div class="col-md-10">
                                        @Html.EditorFor(model => model.ProfileDesc, new { htmlAttributes = new { @class = "form-control", @maxlength = "30" } })
                                        @Html.ValidationMessageFor(model => model.ProfileDesc, "", new { @class = "text-danger" })
                                        @*, @name = "txtProfileName", @name = "txtProfileDesc"*@
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-10">
                                <div class="form-group">
                                    @Html.Label("Assign Menus", htmlAttributes: new { @class = "control-label col-md-2" })
                                </div>
                                <table id="tadmin01" class="table table-bordered table-striped">
                                    <thead>
                                        <tr>
                                            <th><input type="checkbox" id="checkall" />Module</th>
                                            <th colspan="3">Menus</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr> 
                                            <td>
                                                <input type="checkbox" class="chkAdmin" id="checkallAdmin" name="checkallAdmin" value="A"/> Admin
                                            </td>
                                            <td>
                                                <input type="checkbox" class="chkAdmin" id="chkARegistration" name="chkARegistration" value="AA"/> Registration
                                            </td>
                                            <td>
                                                <input type="checkbox" class="chkAdmin" id="chkAModification" name="chkAModification" value="AB"/> Modification
                                            </td>
                                            <td>
                                                <input type="checkbox" class="chkAdmin" id="chkAPwdReset" name="chkAPwdReset" value="AC"/> Password Reset
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <input type="checkbox" id="checkallCustomer" name="checkallCustomer" value="B"/> Customer
                                            </td>
                                            <td>
                                                <input type="checkbox" class="chkCustomer" id="chkCRegister" name="chkCRegister" value="BA"/> Registration
                                                <br/>
                                                <input type="checkbox" class="chkCustomer" id="chkCApproveModify" name="chkApproveModify" value="BD"/> Approve Modified
                                                <br/>
                                                <input type="checkbox" class="chkCustomer" id="chkCPINReset" name="chkPinReset" value="BG"/> PIN Reset
                                                <br />
                                                <input type="checkbox" class="chkCustomer" id="chkCApproveDelete" name="chkApproveDelete" value="BJ"/> Approve Deleted
                                                <br />
                                                <input type="checkbox" class="chkCustomer" id="chkCustomerCharge" name="chkCustCharge" value="BM"/> Customer Charge
                                            </td>
                                            <td>
                                                <input type="checkbox" class="chkCustomer" id="chkCApprove" name="chkCApprove" value="BB"/> Approve <br />
                                                <input type="checkbox" class="chkCustomer" id="chkCustomerStatus" name="chkCustomerStatus" value="BE"/> Customer Status <br />
                                                <input type="checkbox" class="chkCustomer" id="chkAPinReset" name="chkAPinReset" value="BH"/> Approve PIN Reset <br />
                                                <input type="checkbox" class="chkCustomer" id="chkCUnBlockService" name="chkCUnBlockService" value="BK"/> UnBlock Service <br />
                                                <input type="checkbox" class="chkCustomer" id="chkCApproveRC" name="chkCApproveRC" value="BN"/> Approve Renew Charge
                                            </td>
                                            <td>
                                                <input type="checkbox" class="chkCustomer" id="chkCModify" name="chkCModify" value="BC"/> Modify <br />
                                                <input type="checkbox" class="chkCustomer" id="chkCRejectedList" name="chkCRejectedList" value="BF"/> Rejected List <br />
                                                <input type="checkbox" class="chkCustomer" id="chkCDelete" name="chkCDelete" value="BI"/> Delete <br />
                                                <input type="checkbox" class="chkCustomer" id="chkCApproveUnBlock" name="chkCApproveUnBlock" value="BL"/> Approve UnBlock
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <input type="checkbox" class="chkBranchSetup" name="checkallBranchSetup" id="checkallBranchSetup" value="C" /> Branch Setup
                                            </td>
                                            <td>
                                                <input type="checkbox" class="chkBranchSetup" name="chkBranchRegister" id="chkBranchRegister" value="CA"/> Branch Registration
                                            </td>
                                            <td>
                                                <input type="checkbox" class="chkBranchSetup" id="chkBranchModify" name="chkBranchModify" value="CB"/> Branch Modification
                                            </td>
                                            <td>
                                                <input type="checkbox" class="chkBranchSetup" id="chkBranchStatus" name="chkBranchStatus" value="CC"/> Branch Status
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <input type="checkbox" class="chkAcType" id="checkallAcType" name="chkAcType" value="D"/> Account Type Setup
                                            </td>
                                            <td>
                                                <input type="checkbox" class="chkAcType" id="chkAcType" name="chkAcTypem" value="DA"/> Account Type Setup
                                            </td>
                                            <td>
                                                &nbsp;
                                            </td>
                                            <td>
                                                &nbsp;
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <input type="checkbox" class="chkMNepalPay" id="checkallMNepalPay" name="checkallMNepalPay" value="E"/> MNepal Pay
                                            </td>
                                            <td>
                                                <input type="checkbox" class="chkMNepalPay" id="chkManageServices" name="chkManageServices" value="EA"/> Manage Services
                                            </td>
                                            <td>
                                                <input type="checkbox" class="chkMNepalPay" id="chkCheckStatus" name="chkCheckStatus" value="EB"/> Check Status
                                            </td>
                                            <td>
                                                <input type="checkbox" class="chkMNepalPay" id="chkCancellation" name="chkCancellation" value="EC"/> Cancellation
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <input type="checkbox" class="chkUserSetup" id="checkallUserSetup" name="checkallUserSetup" value="F" /> User Setup
                                            </td>
                                            <td>
                                                <input type="checkbox" class="chkUserSetup" id="chkCAdminProfile" name="chkCAdminProfile" value="FA"/> Create Admin Profile
                                                <br/>
                                                <input type="checkbox" class="chkUserSetup" id="chkMCustProfile" name="chkMCustProfile" value="FD"/> Modify Customer Profile
                                            </td>
                                            <td>
                                                <input type="checkbox" class="chkUserSetup" id="chkMAdminProfile" name="chkMAdminProfile" value="FB"/> Modify Admin Profile
                                            </td>
                                            <td>
                                                <input type="checkbox" class="chkUserSetup" id="chkCCustomerProfile" name="chkCCustomerProfile" value="FC"/> Create Customer Profile
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <input type="checkbox" class="chkRequest" id="checkallRequest" name="checkallRequest" value="G" /> Request
                                            </td>
                                            <td>
                                                <input type="checkbox" class="chkRequest" id="chkChkList" name="chkChkList" value="GA"/> Checkbook List
                                                <br />
                                                <input type="checkbox" class="chkRequest" id="chkRecomList" name="chkRecomList" value="GD"/> Recommendation List
                                            </td>
                                            <td>
                                                <input type="checkbox" class="chkRequest" id="chkStmtList" name="chkStmtList" value="GB"/> Statement List
                                            </td>
                                            <td>
                                                <input type="checkbox" class="chkRequest" id="chkComplainList" name="chkComplainList" value="GC"/> Complain List
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <input type="checkbox" class="chkMsg" id="checkallMsg" name="checkallMsg" value="H" /> Messaging
                                            </td>
                                            <td>
                                                <input type="checkbox" class="chkMsg" id="chkUnicastMsg" name="chkUnicastMsg" value="HA"/> Unicast Messaging
                                            </td>
                                            <td>
                                                <input type="checkbox" class="chkMsg" id="chkBulkMsg" name="chkBulkMsg" value="HB"/> Bulk Messaging
                                            </td>
                                            <td>
                                                <input type="checkbox" class="chkMsg" id="chkResendMsg" name="chkResendMsg" value="HC"/> Resend Message
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <input type="checkbox" class="chkReport" id="checkallReport" name="checkallReport" value="I"/> Report
                                            </td>
                                            <td>
                                                <input type="checkbox" class="chkReport" id="chkRSMS" name="chkRSMS" value="IA"/> SMS IN/Out
                                                <br />
                                                <input type="checkbox" class="chkReport" id="chkRRegisterCust" name="chkRRegisterCust" value="ID"/> Registered Customers
                                                <br/>
                                                <input type="checkbox" class="chkReport" id="chkRMerchantPay" name="chkRMerchantPay" value="IG"/> Merchants Payments
                                                <br/>
                                                <input type="checkbox" class="chkReport" id="chkRCardRequest" name="chkRCardRequest" value="IJ"/> Card Requests
                                                <br/>
                                                <input type="checkbox" class="chkReport" id="chkRAdminDetail" name="chkRAdminDetail" value="IM"/> Admin Details
                                            </td>
                                            <td>
                                                <input type="checkbox" class="chkReport" id="chkRCheckBookReq" name="chkRCheckBookReq" value="IB"/> Check Book Requests
                                                <br/>
                                                <input type="checkbox" class="chkReport" id="chkRAdminActivities" name="chkRAdminActivities" value="IE"/> Admin Activities
                                                <br />
                                                <input type="checkbox" class="chkReport" id="chkRMNepalPayTran" name="chkRMNepalPayTran" value="IH"/> MNepalPay Transaction
                                                <br />
                                                <input type="checkbox" class="chkReport" id="chkServicePayments" name="chkServicePayments" value="IK"/> Service Payments
                                                <br />
                                                <input type="checkbox" class="chkReport" id="chkCharge" name="chkCharge" value="IN"/> Charge
                                            </td>
                                            <td>
                                                <input type="checkbox" class="chkReport" id="chkRStmtReq" name="chkRStmtReq" value="IC"/> Statement Requests
                                                <br/>
                                                <input type="checkbox" class="chkReport" id="chkRCustAct" name="chkRCustAct" value="IF"/> Customer Activities
                                                <br/>
                                                <input type="checkbox" class="chkReport" id="chkRPayCancel" name="chkRPayCancel" value="II"/> MNepalPay Cancellation
                                                <br/>
                                                <input type="checkbox" class="chkReport" id="chkRTranDetail" name="chkRTranDetail" value="IL"/> Transaction Details
                                                <br/>
                                                <input type="checkbox" class="chkReport" id="chkRTopupReport" name="chkRTopupReport" value="IO"/> MNepalPay Topup Report
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <input type="checkbox" class="chkPayee" id="checkallPayee" name="checkallPayee" value="J" /> Payee
                                            </td>
                                            <td>
                                                <input type="checkbox" class="chkPayee" id="chkMRegister" name="chkMRegister" value="JA"/> Merchant Registration
                                                <br />
                                                <input type="checkbox" class="chkPayee" id="chkComPartnerModify" name="chkComPartnerModify" value="JD"/> Commision Partner Modification
                                                <br />
                                                <input type="checkbox" class="chkPayee" id="chkMComSlab" name="chkMComSlab" value="JG"/> Modify Commision Slab
                                            </td>
                                            <td>
                                                <input type="checkbox" class="chkPayee" id="chkMModify" name="chkMModify" value="JB"/> Merchant Modification
                                                <br/>
                                                <input type="checkbox" class="chkPayee" id="chkMDetail" name="chkMDetail" value="JE"/> Merchant Details
                                                <br/>
                                                <input type="checkbox" class="chkPayee" id="chkComSlabDetail" name="chkComSlabDetail" value="JH"/> Commission Slab Details
                                            </td>
                                            <td>
                                                <input type="checkbox" class="chkPayee" id="chkComPartRegister" name="chkComPartRegister" value="JC"/> Commission Partner Registration
                                                <br/>
                                                <input type="checkbox" class="chkPayee" id="chkAComSlab" name="chkAComSlab" value="JF"/> Add Commission Slab
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <input type="checkbox" class="chkSetting" id="checkallSetting" name="checkallSetting" value="K" /> Setting
                                            </td>
                                            <td>
                                                <input type="checkbox" class="chkSetting" id="chkCKeywordSettings" name="chkCKeywordSettings" value="KA"/> Keyword Settings
                                                <br />
                                                <input type="checkbox" class="chkSetting" id="chkMMessages" name="chkMMessages" value="KD"/> Modify Messages
                                            </td>
                                            <td>
                                                <input type="checkbox" class="chkSetting" id="chkCStaticKeyword" name="chkCStaticKeyword" value="KB"/> Create Static Keyword
                                                <br/>
                                                <input type="checkbox" class="chkSetting" id="chkChangePwd" name="chkChangePwd" value="KE"/> Change Password
                                            </td>
                                            <td>
                                                <input type="checkbox" class="chkSetting" id="chkMStaticKeyword" name="chkMStaticKeyword" value="KC"/> Modify Static Keyword
                                            </td>
                                        </tr>
                                    </tbody>

                                </table>
                                
                            </div><!-- /. col-md-10-->
                        </div>
                        <!-- /. row-->
                    </div>
                    <!-- /. box-body-->

                    <div class="box-footer">
                        <div class="form-group">
                            <div class="col-md-10">
                                <input type="submit" value="Create" class="btn btn-primary pull-right" id="Submit"/>
                            </div>
                        </div>
                    </div>
                }

            </div>
        </div>
        <!--End Form -->

    </div>
    <!-- /.row -->
</section>
<!-- /.content -->

@section scripts{
    <script type="text/javascript">

      

        $(document).ready(function () {

            $('#tadmin01 tbody tr td:not(:first-child) input[type="checkbox"]').change(function () {
                debugger;
                var id = $(this).closest('tr').find('td:first input[type="checkbox"]').attr('id');
                if ($('#' + id).is(':checked')) {
                    if($(this).closest('tr').find('td:not(:first-child) input[type="checkbox"]').is(':checked'))
                    {
                        return false;
                    }
                    $('#' + id).prop('checked',false);
                }
                else {
                    $('#' + id).prop('checked', true);
                }
            });





            $("#checkall").change(function () {  //"select all" change 
                var status = this.checked; // "select all" checked status
                $('input:checkbox').each(function () { //iterate all listed checkbox items
                    this.checked = status; //change ".checkbox" checked status
                });
            });

            $('input:checkbox').change(function () {
                //uncheck "select all", if one of the listed checkbox item is unchecked
                if (false == $(this).prop("checked")) { //if this item is unchecked
                    $("#checkall").prop('checked', false); //change "select all" checked status to false
                }
                //check "select all" if all checkbox items are checked
                if ($('input:checkbox:checked').length == $('input:checkbox').length) {
                    $("#checkall").prop('checked', true);
                }
            });

        
            $("#checkallAdmin").click(function () {
                $(".chkAdmin").prop('checked', $(this).prop('checked'));
            });

            $("#checkallCustomer").click(function () {
                $(".chkCustomer").prop('checked', $(this).prop('checked'));
            });

            $("#checkallBranchSetup").click(function () {
                $(".chkBranchSetup").prop('checked', $(this).prop('checked'));
            });
        
            $("#checkallAcType").click(function () {
                $(".chkAcType").prop('checked', $(this).prop('checked'));
            });
        
            $("#checkallMNepalPay").click(function () {
                $(".chkMNepalPay").prop('checked', $(this).prop('checked'));
            });

            $("#checkallUserSetup").click(function () {
                $(".chkUserSetup").prop('checked', $(this).prop('checked'));
            });

            $("#checkallRequest").click(function () {
                $(".chkRequest").prop('checked', $(this).prop('checked'));
            });

            $("#checkallMsg").click(function () {
                $(".chkMsg").prop('checked', $(this).prop('checked'));
            });

            $("#checkallReport").click(function () {
                $(".chkReport").prop('checked', $(this).prop('checked'));
            });

            $("#checkallPayee").click(function () {
                $(".chkPayee").prop('checked', $(this).prop('checked'));
            });

            $("#checkallSetting").click(function () {
                $(".chkSetting").prop('checked', $(this).prop('checked'));
            });

        });
    </script>
    <!-- Load jQuery and the validate plugin -->
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.10.2.js"></script>
    <script src='http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
    <script src='http://cdnjs.cloudflare.com/ajax/libs/bootstrap-validator/0.4.5/js/bootstrapvalidator.min.js'></script>

    <!-- jQuery Form Validation code -->

    <script type="text/javascript">

        


        $('#ProfileName').change(function () {

            var PCode = $('#ProfileName').val();
          
                $.ajax({
                    url: '@Url.Action("CheckAdminProfile","UserSetup")',
                    data: { 'ProfileName': PCode },
                    type: 'Get',
                    success: function (data) {
                        if (data == "True") {
                            $('#check').html("");
                            $('#check').css("color", "green");
                            $('#check').html("Valid").show();
                            $('#Submit').show();

                        }
                        else {
                            $('#check').html("");
                            $('#check').css("color", "red");
                            $('#check').html("Profile Name Already exists").show();
                            $('#Submit').hide();

                        }
                    },
                    error: function (data) {

                    }


                });
            
        });



        /**Validation Check */
        $('#CreateAdminForm').bootstrapValidator({
            feedbackIcons: {
                valid: 'glyphicon glyphicon-ok',
                invalid: 'glyphicon glyphicon-remove',
                validating: 'glyphicon glyphicon-refresh'
            },
            fields: {
                ProfileName: {
                    validators: {
                        notEmpty: {
                            message: 'The ProfileName is required and cannot be empty'
                        },
                        stringLength: {
                            max: 20,
                            min: 4,
                            message: 'Please Use Profile Name, min 4 character, Max 20 character'
                        },
                        regexp: {
                            regexp: /^[\w\-\s]+$/,
                            message: 'Only Alphanumeric accepted'
                        }
                    }
                },
                ProfileDesc: {
                    validators: {
                        notEmpty: {
                            message: 'The Profile Description is required and cannot be empty'
                        },
                        stringLength: {
                            max: 30,
                            min: 4,
                            message: 'Please Use Profile Name, min 4 character, Max 20 character'
                        },
                        regexp: {
                            regexp: /^[\w\-\s]+$/,
                            message: 'Only Alphanumeric accepted'
                        }
                    }
                }
            }
        });
    </script>

}

<!-- =============================================== -->
