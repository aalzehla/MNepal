
@{
    ViewBag.Title = "Index";
}

<!-- Content Header (Page header) -->
<section class="content-header">
    <h1>
        Settings
        <small> T-Pin Reset</small>
    </h1>
    <ol class="breadcrumb">
        <li><a href="#"><i class="fa fa-user"></i> Payment</a></li>
        <li class="active"> T-Pin Reset</li>
    </ol>
</section>

@*<section class="content-header">
    <h1>
        Transaction Pin Reset
        <small> T-Pin</small>
    </h1>
    <ol class="breadcrumb">
        <li><a href="#"><i class="fa fa-dashboard"></i> Dashboard</a></li>
        <li class="active">PinReset</li>
    </ol>
</section>*@

<!-- Main content -->
<section class="content">
    <!-- Main row -->
    <div class="row">

        <!-- Center column -->
        <div class="col-md-10">

            <!-- Horizontal Form -->
            <div class="box box-info">
                <div class="box-header with-border">
                    <h3 class="box-title">Change Transaction Pin</h3>
                </div>
                <!-- /.box-header -->
                <!-- form start -->

                @using (Html.BeginForm("Index", "PinReset", FormMethod.Post, new { @id = "PinResetForm", @class = "form-horizontal" }))
                {
                    @Html.AntiForgeryToken()
                    @Html.ValidationSummary(true)

                    if (this.ViewData["pin_messsage"] != null)
                    {
                        if (this.ViewData["message_class"].ToString() == "success_info")
                        {
                            <div class="alert alert-success">
                                <button type="button" class="close" data-dismiss="alert">&times;</button>
                                <h4>Success</h4> @this.ViewData["pin_messsage"]
                            </div>
                        }
                        else
                        {
                            <div class="alert alert-danger">
                                <button type="button" class="close" data-dismiss="alert">&times;</button>
                                <h4>Error</h4> @this.ViewData["pin_messsage"]
                            </div>
                        }
                    }
                    <div class="box-body">
                        <div class="container">
                            <div class="row">
                                <div class="col-md-8 form-group has-feedback">
                                    <label for="inputEmail3" class="col-sm-3 control-label">Old T-Pin 
                                    <b style="color:red">*</b></label>
                                    <div class="col-sm-8">
                                        <input type="password" class="form-control" id="oldPin" name="txtOldPin" placeholder="T-Pin" maxlength="4" required>
                                    </div>
                                </div>

                                <div class="col-md-8 form-group has-feedback>">
                                    <label for="inputPassword3" class="col-sm-3 control-label">New T-Pin 
                                    <b style="color:red">*</b> </label>
                                    <div class="col-sm-8">
                                        <input type="password" class="form-control" id="newPwd" name="txtNewPin" placeholder="New T-Pin" maxlength="4" required>
                                    </div>
                                </div>

                                <div class="col-md-8 form-group has-feedback">
                                    <label for="inputPassword4" class="col-sm-3 control-label">ReType T-Pin 
                                    <b style="color:red">*</b></label>
                                    <div class="col-sm-8">
                                        <input type="password" class="form-control" id="retypePin" name="txtRetypePin" placeholder="Retype T-Pin" maxlength="4" required>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- /.box-body -->
                    <div class="box-footer">
                        @*<button type="submit" class="btn btn-default">Cancel</button>*@
                        <button type="submit" class="btn btn-info pull-right">Change T-Pin</button>
                    </div>
                    <!-- /.box-footer -->
                }
            </div>
            <!-- /.box -->

        </div>


        <div class="col-md-2"></div>

    </div>
    <!-- /.row -->
</section>
<!-- /.content -->

@section scripts{

<!-- Load jQuery and the validate plugin -->
<script type="text/javascript" src="http://code.jquery.com/jquery-1.10.2.js"></script>

<script src='http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
<script src='http://cdnjs.cloudflare.com/ajax/libs/bootstrap-validator/0.4.5/js/bootstrapvalidator.min.js'></script>

<!-- jQuery Form Validation code -->
<script>

    $(document).ready(function () {
        $('#PinResetForm').bootstrapValidator({
            feedbackIcons: {
                valid: 'glyphicon glyphicon-ok',
                invalid: 'glyphicon glyphicon-remove',
                validating: 'glyphicon glyphicon-refresh'
            },
            fields: {
                txtOldPin: {
                    validators: {
                        integer: {
                            message: 'The value is not an integer'
                        },
                        notEmpty: {
                            message: 'The old pin is required and cannot be empty'
                        }
                    }
                },
                txtNewPin: {
                    validators: {
                        integer: {
                            message: 'The value is not an integer'
                        },
                        notEmpty: {
                            message: 'The new pin is required and cannot be empty'
                        },
                        stringLength: {
                            max: 4,
                            min: 4,
                            message: 'The new pin must be 4 digit numeric password'
                        }
                    }
                },
                txtRetypePin: {
                    validators: {
                        integer: {
                            message: 'The value is not an integer'
                        },
                        notEmpty: {
                            message: 'The retype pin is required and cannot be empty'
                        },
                        stringLength: {
                            max: 4,
                            min: 4,
                            message: 'The retype pin must be 4 digit numeric password'
                        },
                        identical: {
                            field: 'txtNewPin',
                            message: 'The Pin dont match. Please retry!'
                        }
                    }
                }
            }
        });
    });

</script>
}
